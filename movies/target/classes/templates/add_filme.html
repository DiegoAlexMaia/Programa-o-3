<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <title>Adicionar Filme</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
</head>

<body>
<div class="container mt-4">
    <h2>Adicionar Novo Filme</h2>

    <form th:action="@{/filmes/novo}" method="post" th:object="${filme}" class="needs-validation" novalidate>
        <!-- Alerta geral de erro -->
        <div th:if="${#fields.hasErrors('*')}" class="alert alert-danger">
            Por favor, corrija os erros abaixo e tente novamente.
        </div>

        <!-- Campo Título -->
        <div class="mb-3">
            <label class="form-label">Título</label>
            <input type="text" class="form-control"
                   th:field="*{titulo}"
                   th:classappend="${#fields.hasErrors('titulo')} ? 'is-invalid' : (${filme.titulo != null} ? 'is-valid' : '')"
                   required>
            <div class="invalid-feedback" th:if="${#fields.hasErrors('titulo')}" th:errors="*{titulo}"></div>
            <div class="valid-feedback" th:unless="${#fields.hasErrors('titulo')}" th:if="${filme.titulo != null}">Tudo certo!</div>
        </div>

        <!-- Campo Ano de Lançamento -->
        <div class="mb-3">
            <label class="form-label">Ano de Lançamento</label>
            <input type="number" class="form-control"
                   th:field="*{anoLancamento}"
                   th:classappend="${#fields.hasErrors('anoLancamento')} ? 'is-invalid' : (${filme.anoLancamento != null && filme.anoLancamento > 0} ? 'is-valid' : '')"
                   required>
            <div class="invalid-feedback" th:if="${#fields.hasErrors('anoLancamento')}" th:errors="*{anoLancamento}"></div>
            <div class="valid-feedback" th:unless="${#fields.hasErrors('anoLancamento')}" th:if="${filme.anoLancamento != null && filme.anoLancamento > 0}">Tudo certo!</div>
        </div>

        <!-- Botões -->
        <button type="submit" class="btn btn-primary">Salvar</button>
        <a href="/filmes" class="btn btn-danger">Cancelar</a>
    </form>
</div>
</body>

</html>
